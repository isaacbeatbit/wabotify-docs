---
title: Acciones
description: Agregar acciones al Agente de IA
---

import { Aside } from "@astrojs/starlight/components";

# Acciones

Agregar acciones al Agente de IA

Este documento describe c√≥mo se puede agregar acciones al Agente de IA, como por ejemplo:

- Apagar un agente de IA.
- Asignar una fase al contacto.
- Asignar una etiqueta al contacto.
- Asignar una segmentaci√≥n al contacto.
- Asignar un agente humano al contacto.

![Crear Nuevo Agente](../../../assets/agente-ia/actions.avif)

## Campos de la Acci√≥n

| Campo           | Descripci√≥n                                                                                                                                                                                         |
| --------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| reference       | Descripci√≥n detallada del contenido de la intenci√≥n. Se utiliza para poder darle informaci√≥n al agente y sepa la intenci√≥n del usuario, como por ejemplo: **‚ÄúQuiero hablar con un agente humano‚Äù**. |
| tags            | Son referencias para poder entender m√°s la informaci√≥n dentro de la acci√≥n, si bien es cierto, con la Referencia existe m√°s posibilidades, con los tags se complementa esta funcionalidad.          |
| enabled         | Booleano que indica si la acci√≥n est√° activada (`true`) o no (`false`).                                                                                                                             |
| responseMessage | Mensaje que el agente debe de responder al usuario.                                                                                                                                                 |
| responseIA      | Booleano que indica si despu√©s de ejecutar las acciones, el agente debe continuar con el flujo de IA (`true`) o usar solo el responseMessage (`false`).                                             |
| responseJson    | Booleano que indica si el agente debe de responder con un JSON estructurado (`true`) o un mensaje de texto plano (`false`).                                                                         |
| action          | Listado de acciones que se pueden ejecutar el Agente de IA.                                                                                                                                         |

---

<Aside title="Nota">
  El agente de IA ejecutar√° las acciones en orden, esto quiere decir que si puso
  dos asignaciones, el agente de IA asignar√° la primera y luego la segunda.
</Aside>

## Tipos de Respuesta

Las acciones del agente tienen dos configuraciones importantes que determinan c√≥mo responde despu√©s de ejecutar las acciones:

### ResponseIA

Controla si el agente debe continuar con el flujo de IA despu√©s de ejecutar las acciones.

| Valor   | Comportamiento                                                  |
| ------- | --------------------------------------------------------------- |
| `true`  | Ejecuta las acciones + responde con IA (m√°s inteligente)        |
| `false` | Ejecuta las acciones + responde solo con responseMessage (fijo) |

**Ejemplo con responseIA = true:**

```
üë§ Usuario: "Quiero informaci√≥n sobre precios"
ü§ñ Bot: [Ejecuta acciones: AsignarTag "comercial"]
ü§ñ Bot: "¬°Hola! Me complace ayudarte con informaci√≥n sobre nuestros precios. Tenemos varios planes disponibles..."
```

**Ejemplo con responseIA = false:**

```
üë§ Usuario: "Quiero informaci√≥n sobre precios"
ü§ñ Bot: [Ejecuta acciones: AsignarTag "comercial"]
ü§ñ Bot: "Gracias por tu consulta, un ejecutivo te contactar√° pronto."
```

---

### ResponseJSON

Controla el formato de la respuesta de la acci√≥n (solo cuando `responseIA = false`).

| Valor   | Formato de Respuesta |
| ------- | -------------------- |
| `false` | Texto plano          |
| `true`  | JSON estructurado    |

**Ejemplo con responseJSON = false:**

```json
{
  "success": true,
  "answer": "Gracias por tu consulta, un ejecutivo te contactar√° pronto."
}
```

**Ejemplo con responseJSON = true:**

```json
{
  "success": true,
  "answer": {
    "message": "Gracias por tu consulta, un ejecutivo te contactar√° pronto.",
    "actionsExecuted": [
      {
        "type": "action.tag",
        "value": "comercial"
      },
      {
        "type": "action.stage",
        "value": "prospecto"
      }
    ]
  }
}
```

<Aside title="Importante">
  El campo `responseJSON` solo afecta cuando `responseIA = false`. Si
  `responseIA = true`, la respuesta siempre ser√° texto plano generado por la IA.
</Aside>

---

## Casos de Uso Comunes

### 1. Acci√≥n con Respuesta Inteligente

```json
{
  "intent": "solicitar_informacion",
  "reference": "El usuario solicita informaci√≥n sobre productos o servicios",
  "tags": ["informacion", "productos"],
  "enabled": true,
  "responseMessage": "",
  "responseIA": true,
  "responseJson": false,
  "action": [
    {
      "type": "AsignarTag",
      "value": "lead_caliente"
    }
  ]
}
```

**Resultado:** Ejecuta la acci√≥n + la IA responde inteligentemente seg√∫n el contexto.

---

### 2. Acci√≥n con Respuesta Fija

```json
{
  "intent": "contactar_soporte",
  "reference": "El usuario quiere contactar con soporte t√©cnico",
  "tags": ["soporte", "ayuda"],
  "enabled": true,
  "responseMessage": "He registrado tu solicitud de soporte. Un t√©cnico se comunicar√° contigo en breve.",
  "responseIA": false,
  "responseJson": false,
  "action": [
    {
      "type": "AsignarTag",
      "value": "soporte"
    },
    {
      "type": "AsignarFase",
      "value": "ticket_abierto"
    }
  ]
}
```

**Resultado:** Ejecuta las acciones + respuesta fija predefinida.

---

### 3. Acci√≥n para API/Webhook (JSON)

```json
{
  "intent": "registrar_lead",
  "reference": "Registro autom√°tico de lead en sistema externo",
  "tags": ["lead", "crm"],
  "enabled": true,
  "responseMessage": "Registro completado exitosamente",
  "responseIA": false,
  "responseJson": true,
  "action": [
    {
      "type": "AsignarTag",
      "value": "lead_registrado"
    }
  ]
}
```

**Resultado:** Ejecuta las acciones + respuesta JSON estructurada (ideal para integraciones).

---

## Acciones Disponibles

### Asignaci√≥n de Agentes

El agente de IA puede asignar un agente humano al contacto, esto se podr√° visualizar en la vista de contactos, en el campo de **Agente Asignado**.

### Asignaci√≥n de Etiquetas

El agente de IA puede asignar una etiqueta al contacto, esto se podr√° visualizar en la vista de contactos, en el campo de **Etiquetas**.

### Asignaci√≥n de Fases

El agente de IA puede asignar una fase al contacto, esto se podr√° visualizar en la vista de contactos, en el campo de **Fase**.

### Asignaci√≥n de Segmentaci√≥n

El agente de IA puede asignar una segmentaci√≥n al contacto, esto se podr√° visualizar en la vista de contactos, en el campo de **Segmentaci√≥n**.

### Apagar el Agente de IA

El Agente de IA puede apagarse con la acci√≥n de Shutdown, esto se podr√° visualizar en la vista de contactos, en el campo de **Agente Activo**.

<Aside title="Importante" type="caution">
  Si el agente se apaga, ya no contestar√° hasta que se vuelva a encender de
  forma manual.
</Aside>
